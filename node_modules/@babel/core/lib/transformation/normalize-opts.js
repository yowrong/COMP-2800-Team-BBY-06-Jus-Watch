"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = normalizeOptions;

<<<<<<< HEAD
const path = require("path");
=======
function _path() {
  const data = require("path");

  _path = function () {
    return data;
  };

  return data;
}
>>>>>>> origin/invite_feature

function normalizeOptions(config) {
  const {
    filename,
    cwd,
<<<<<<< HEAD
    filenameRelative = typeof filename === "string" ? path.relative(cwd, filename) : "unknown",
=======
    filenameRelative = typeof filename === "string" ? _path().relative(cwd, filename) : "unknown",
>>>>>>> origin/invite_feature
    sourceType = "module",
    inputSourceMap,
    sourceMaps = !!inputSourceMap,
    sourceRoot = config.options.moduleRoot,
<<<<<<< HEAD
    sourceFileName = path.basename(filenameRelative),
=======
    sourceFileName = _path().basename(filenameRelative),
>>>>>>> origin/invite_feature
    comments = true,
    compact = "auto"
  } = config.options;
  const opts = config.options;
  const options = Object.assign({}, opts, {
    parserOpts: Object.assign({
<<<<<<< HEAD
      sourceType: path.extname(filenameRelative) === ".mjs" ? "module" : sourceType,
=======
      sourceType: _path().extname(filenameRelative) === ".mjs" ? "module" : sourceType,
>>>>>>> origin/invite_feature
      sourceFileName: filename,
      plugins: []
    }, opts.parserOpts),
    generatorOpts: Object.assign({
      filename,
      auxiliaryCommentBefore: opts.auxiliaryCommentBefore,
      auxiliaryCommentAfter: opts.auxiliaryCommentAfter,
      retainLines: opts.retainLines,
      comments,
      shouldPrintComment: opts.shouldPrintComment,
      compact,
      minified: opts.minified,
      sourceMaps,
      sourceRoot,
      sourceFileName
    }, opts.generatorOpts)
  });

  for (const plugins of config.passes) {
    for (const plugin of plugins) {
      if (plugin.manipulateOptions) {
        plugin.manipulateOptions(options, options.parserOpts);
      }
    }
  }

  return options;
}